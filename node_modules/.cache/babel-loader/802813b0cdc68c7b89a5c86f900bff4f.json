{"ast":null,"code":"import { getRegionService, getStateService, register } from '../../modules/auth/pages/SignUpService';\nimport Cookies from 'js-cookie';\nimport { ACCESS_TOKEN_KEY } from '../../utils/constants';\nimport { replace } from 'connected-react-router';\nimport { ROUTES } from '../../configs/routes';\nimport { toast } from 'react-toastify';\nimport { getErrorMessageResponse } from '../../utils';\nexport const GET_REGION_SUCCESS = 'GET_REGION_SUCCESS';\nexport const GET_STATE_SUCCESS = 'GET_STATE_SUCCESS';\nexport const ON_LOADING = 'ON_LOADING';\nexport const OFF_LOADING = 'OFF_LOADING';\nexport const ERROR_MESSAGE = 'ERROR_MESSAGE';\nexport const REGISTER_SUCCESS = 'REGISTER_SUCCESS';\nexport const getRegion = () => {\n  return async (dispatch, getState) => {\n    try {\n      const response = await getRegionService();\n      dispatch({\n        type: GET_REGION_SUCCESS,\n        payload: response.data.data\n      });\n    } catch (error) {\n      console.error(error);\n    }\n  };\n};\nexport const getState = id => {\n  return async (dispatch, getState) => {\n    try {\n      const response = await getStateService(id);\n      dispatch({\n        type: GET_STATE_SUCCESS,\n        payload: response.data.data\n      });\n    } catch (error) {\n      console.error(error);\n    }\n  };\n};\nexport const registerAction = value => {\n  return async (dispatch, getState) => {\n    try {\n      dispatch({\n        type: ERROR_MESSAGE,\n        payload: ''\n      });\n      dispatch({\n        type: ON_LOADING\n      });\n      const response = await register(value);\n      dispatch({\n        type: OFF_LOADING\n      });\n      console.log(response);\n      if (!response.data.error) {\n        Cookies.set(ACCESS_TOKEN_KEY, response.data.token, {\n          expires: 7\n        });\n        dispatch(replace(ROUTES.home));\n        toast.success('Đăng nhập thành công');\n        console.log(response.data.error);\n      } else if (response.data.error) {\n        console.log(response.data.error);\n        dispatch({\n          type: ERROR_MESSAGE,\n          payload: getErrorMessageResponse(response.data.message)\n        });\n      }\n    } catch (error) {\n      dispatch({\n        type: OFF_LOADING\n      });\n      dispatch({\n        type: ERROR_MESSAGE,\n        payload: getErrorMessageResponse(error.response.data)\n      });\n    }\n  };\n};\nexport const setErrorMessge = () => ({\n  type: ERROR_MESSAGE,\n  payload: ''\n});","map":{"version":3,"names":["getRegionService","getStateService","register","Cookies","ACCESS_TOKEN_KEY","replace","ROUTES","toast","getErrorMessageResponse","GET_REGION_SUCCESS","GET_STATE_SUCCESS","ON_LOADING","OFF_LOADING","ERROR_MESSAGE","REGISTER_SUCCESS","getRegion","dispatch","getState","response","type","payload","data","error","console","id","registerAction","value","log","set","token","expires","home","success","message","setErrorMessge"],"sources":["D:/TYSCRIPT/Store Intern PG/login/src/redux/actions/actionSignUp.ts"],"sourcesContent":["import { ThunkAction } from 'redux-thunk';\r\nimport { getRegionService, getStateService, register } from '../../modules/auth/pages/SignUpService';\r\nimport { AppState } from '../reducer/reducer';\r\nimport { ISignUpParams } from '../../models/auth';\r\nimport Cookies from 'js-cookie';\r\nimport { ACCESS_TOKEN_KEY } from '../../utils/constants';\r\nimport { replace } from 'connected-react-router';\r\nimport { ROUTES } from '../../configs/routes';\r\nimport { toast } from 'react-toastify';\r\nimport { getErrorMessageResponse } from '../../utils';\r\n\r\nexport const GET_REGION_SUCCESS = 'GET_REGION_SUCCESS';\r\nexport const GET_STATE_SUCCESS = 'GET_STATE_SUCCESS';\r\nexport const ON_LOADING = 'ON_LOADING';\r\nexport const OFF_LOADING = 'OFF_LOADING';\r\nexport const ERROR_MESSAGE = 'ERROR_MESSAGE';\r\nexport const REGISTER_SUCCESS = 'REGISTER_SUCCESS';\r\n\r\nexport const getRegion = (): ThunkAction<void, AppState, any, any> => {\r\n  return async (dispatch, getState) => {\r\n    try {\r\n      const response = await getRegionService();\r\n      dispatch({ type: GET_REGION_SUCCESS, payload: response.data.data });\r\n    } catch (error) {\r\n      console.error(error);\r\n    }\r\n  };\r\n};\r\nexport const getState = (id: number): ThunkAction<void, AppState, any, any> => {\r\n  return async (dispatch, getState) => {\r\n    try {\r\n      const response = await getStateService(id);\r\n      dispatch({ type: GET_STATE_SUCCESS, payload: response.data.data });\r\n    } catch (error) {\r\n      console.error(error);\r\n    }\r\n  };\r\n};\r\nexport const registerAction = (value: ISignUpParams): ThunkAction<void, AppState, any, any> => {\r\n  return async (dispatch, getState) => {\r\n    try {\r\n      dispatch({ type: ERROR_MESSAGE, payload: '' });\r\n      dispatch({ type: ON_LOADING });\r\n      const response = await register(value);\r\n      dispatch({ type: OFF_LOADING });\r\n      console.log(response);\r\n      if (!response.data.error) {\r\n        Cookies.set(ACCESS_TOKEN_KEY, response.data.token, { expires: 7 });\r\n        dispatch(replace(ROUTES.home));\r\n        toast.success('Đăng nhập thành công');\r\n        console.log(response.data.error);\r\n      } else if (response.data.error) {\r\n        console.log(response.data.error);\r\n        dispatch({ type: ERROR_MESSAGE, payload: getErrorMessageResponse(response.data.message) });\r\n      }\r\n    } catch (error: any) {\r\n      dispatch({ type: OFF_LOADING });\r\n      dispatch({ type: ERROR_MESSAGE, payload: getErrorMessageResponse(error.response.data) });\r\n    }\r\n  };\r\n};\r\nexport const setErrorMessge = () => ({ type: ERROR_MESSAGE, payload: '' });\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}